{"version":3,"sources":["controls/chartControl/PaletteGenerator.ts"],"names":[],"mappings":"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","file":"controls/chartControl/PaletteGenerator.js","sourcesContent":["import { ChartPalette } from './ChartControl.types';\r\nimport {\r\n  OFFICE_COLORFUL1,\r\n  OFFICE_COLORFUL2,\r\n  OFFICE_COLORFUL3,\r\n  OFFICE_COLORFUL4,\r\n  OFFICE_MONOCHROMATIC1,\r\n  OFFICE_MONOCHROMATIC2,\r\n  OFFICE_MONOCHROMATIC3,\r\n  OFFICE_MONOCHROMATIC4,\r\n  OFFICE_MONOCHROMATIC5,\r\n  OFFICE_MONOCHROMATIC6,\r\n  OFFICE_MONOCHROMATIC7,\r\n  OFFICE_MONOCHROMATIC8,\r\n  OFFICE_MONOCHROMATIC9,\r\n  OFFICE_MONOCHROMATIC10,\r\n  OFFICE_MONOCHROMATIC11,\r\n  OFFICE_MONOCHROMATIC12,\r\n  OFFICE_MONOCHROMATIC13\r\n} from './ChartColorPalettes';\r\nimport * as Color from 'color';\r\n\r\n\r\n/**\r\n * Generates color palettes matching those you get within Office charts\r\n */\r\nexport class PaletteGenerator {\r\n\r\n  /**\r\n   * Returns an array of colors generated using one of the\r\n   * pre-defined Office palettes colors\r\n   * @param palette the pre-defined Office palette\r\n   * @param desiredLength the desired resulting array lenght\r\n   */\r\n  public static GetPalette(palette: ChartPalette, desiredLength: number): string[] {\r\n    // Add default color scheme if it wasn't provided\r\n    let paletteColors: string[] = [];\r\n    switch (palette) {\r\n      case ChartPalette.OfficeColorful4:\r\n        paletteColors = this.generateRepeatingPattern(OFFICE_COLORFUL4, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeColorful3:\r\n        paletteColors = this.generateRepeatingPattern(OFFICE_COLORFUL3, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeColorful2:\r\n        paletteColors = this.generateRepeatingPattern(OFFICE_COLORFUL2, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeMonochromatic1:\r\n        paletteColors = this.generateNonRepeatingGradient(OFFICE_MONOCHROMATIC1, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeMonochromatic2:\r\n        paletteColors = this.generateNonRepeatingGradient(OFFICE_MONOCHROMATIC2, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeMonochromatic3:\r\n        paletteColors = this.generateNonRepeatingGradient(OFFICE_MONOCHROMATIC3, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeMonochromatic4:\r\n        paletteColors = this.generateNonRepeatingGradient(OFFICE_MONOCHROMATIC4, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeMonochromatic5:\r\n        paletteColors = this.generateNonRepeatingGradient(OFFICE_MONOCHROMATIC5, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeMonochromatic6:\r\n        paletteColors = this.generateNonRepeatingGradient(OFFICE_MONOCHROMATIC6, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeMonochromatic7:\r\n        paletteColors = this.generateRepeatingPattern(OFFICE_MONOCHROMATIC7, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeMonochromatic8:\r\n        paletteColors = this.generateNonRepeatingGradient(OFFICE_MONOCHROMATIC8, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeMonochromatic9:\r\n        paletteColors = this.generateNonRepeatingGradient(OFFICE_MONOCHROMATIC9, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeMonochromatic10:\r\n        paletteColors = this.generateNonRepeatingGradient(OFFICE_MONOCHROMATIC10, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeMonochromatic11:\r\n        paletteColors = this.generateNonRepeatingGradient(OFFICE_MONOCHROMATIC11, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeMonochromatic12:\r\n        paletteColors = this.generateNonRepeatingGradient(OFFICE_MONOCHROMATIC12, desiredLength);\r\n        break;\r\n      case ChartPalette.OfficeMonochromatic13:\r\n        paletteColors = this.generateNonRepeatingGradient(OFFICE_MONOCHROMATIC13, desiredLength);\r\n        break;\r\n      default:\r\n        paletteColors = this.generateRepeatingPattern(OFFICE_COLORFUL1, desiredLength);\r\n        break;\r\n    }\r\n\r\n    return paletteColors;\r\n  }\r\n\r\n  /**\r\n   * ChartJs doesn't give cycle through colors if the length of array of colors is smaller than\r\n   * the data length. This function repeats the array as many times as needed to make sure each\r\n   * item has a background color.\r\n   * @param array the array to make bigger\r\n   * @param desiredLength the desired length\r\n   */\r\n  public static generateRepeatingPattern(array: string[], desiredLength: number): string[] {\r\n    if (desiredLength === 0) {\r\n      return [];\r\n    }\r\n\r\n    let a: string[] = array;\r\n    while (a.length * 2 <= desiredLength) {\r\n      a = a.concat(a);\r\n    }\r\n\r\n    if (a.length < desiredLength) {\r\n      a = a.concat(a.slice(0, desiredLength - a.length));\r\n    }\r\n    return a;\r\n  }\r\n\r\n  /**\r\n   * Some of the Office color palettes consist of\r\n   * a non-repeating gradient from one color to another,\r\n   * divided by the number of steps (or array elements)\r\n   * @param colorRange the colors to start and end with\r\n   * @param numSteps the number of gradient steps to generate\r\n   */\r\n  public static generateNonRepeatingGradient(colorRange: string[], numSteps: number): string[] {\r\n    const startHex: string = colorRange[0];\r\n    const endHex: string = colorRange[colorRange.length - 1];\r\n    const startRGB: number[] = this._hexToRGB(startHex);\r\n    const endRGB: number[] = this._hexToRGB(endHex);\r\n\r\n    const colors: string[] = [];\r\n\r\n    const factorStep: number = 1 / (numSteps - 1);\r\n    for (let index: number = 0; index < numSteps; index++) {\r\n      const interpolatedColor: number[] = this._interpolateColors(startRGB, endRGB, factorStep * index);\r\n      const hexColor: string = this._rgbToHex(interpolatedColor);\r\n      colors.push(hexColor);\r\n    }\r\n\r\n    return colors;\r\n  }\r\n\r\n  /**\r\n  * Converts a color or array of colors to a semi-opaque version\r\n  * @param colors a single color, or array of colors to convert\r\n  * @param alphaValue a value between 0 and 1 indicating the opacity (alpha)\r\n  */\r\n  public static alpha(colors: string | string[], alphaValue: number): string | string[] {\r\n    if (colors instanceof Array) {\r\n      return colors.map((color: string) => {\r\n        return Color(color).alpha(alphaValue).toString();\r\n      });\r\n    } else {\r\n      return Color(colors).alpha(alphaValue).toString();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Interpolates between two colors\r\n   * @param color1 start color\r\n   * @param color2 end color\r\n   * @param factor interpolation facotor\r\n   */\r\n  private static _interpolateColors(color1: number[], color2: number[], factor: number): number[] {\r\n    if (arguments.length < 3) {\r\n      factor = 0.5;\r\n    }\r\n\r\n    const result: number[] = color1.slice();\r\n    for (let i: number = 0; i < 3; i++) {\r\n      result[i] = Math.round(result[i] + factor * (color2[i] - color1[i]));\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Converts a hex color to RGB\r\n   * @param hex the hex color string\r\n   */\r\n  private static _hexToRGB(hex: string): number[] {\r\n    const result: RegExpExecArray = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\r\n    // tslint:disable-next-line:no-bitwise\r\n    return result ? [\r\n      parseInt(result[1], 16),\r\n      parseInt(result[2], 16),\r\n      parseInt(result[3], 16)\r\n    ] : undefined;\r\n  }\r\n\r\n  /**\r\n   * Converts an RGB colour to a hex string\r\n   * @param rgb The RGC color\r\n   */\r\n  private static _rgbToHex(rgb: number[]): string {\r\n    // tslint:disable-next-line:no-bitwise\r\n    return '#' + ((1 << 24) + (rgb[0] << 16) + (rgb[1] << 8) + rgb[2]).toString(16).slice(1);\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}